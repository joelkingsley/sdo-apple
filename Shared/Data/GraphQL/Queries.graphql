query GetAllChannels {
  channels {
    channel_id
    channel_name
    channel_type
    location_lat
    location_long
    region_code
    address_text
  }
}

query GetHomeScreenData($uuid: String!) {
  continueWatching:continue_watching(where: {user_uuid: {_eq: $uuid}}) {
    resume_time
    video {
      video_id
      channel {
        channel_id
        channel_name
      }
      date_published
      title
      speaker {
        speaker_name
      }
      gcp_thumbnail_bucket_name
      gcp_thumbnail_file_name
    }
  }
  userList:user_list(where: {user_uuid: {_eq: $uuid}}) {
    video {
      video_id
      channel {
        channel_id
        channel_name
      }
      date_published
      title
      speaker {
        speaker_name
      }
      gcp_thumbnail_bucket_name
      gcp_thumbnail_file_name
    }
  }
  newReleases:videos(order_by: {date_published: desc}) {
    video_id
    channel {
      channel_id
      channel_name
    }
    date_published
    title
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
}

query GetVideoDetailData($videoId: uuid!, $channelId: uuid!) {
  videoDetail:videos(where: {video_id: {_eq: $videoId}}) {
    video_id
    title
    video_type
    date_published
    description
    speaker {
      speaker_id
      speaker_name
    }
    channel {
      channel_id
      channel_name
      channel_type
    }
    language {
      language_code
      source_country_flag
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  moreVideosInChannel: videos(where: {channel_id: {_eq: $channelId}, video_id: {_neq: $videoId}}) {
    video_id
    title
    channel {
      channel_id
      channel_name
    }
    date_published
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
}

query GetVideosForSearchText($searchText: String!, $limit: Int!, $offset: Int!) {
  videos(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}]}, limit: $limit, offset: $offset) {
    video_id
    video_type
    title
    channel {
      channel_id
      channel_name
    }
    date_published
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  videos_aggregate(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}]}) {
    aggregate {
      count
    }
  }
}

query GetVideosForSearchTextAndVideoType($searchText: String!, $videoType: video_types_enum!, $limit: Int!, $offset: Int!) {
  videos(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}], video_type: {_eq: $videoType}}, limit: $limit, offset: $offset) {
    video_id
    video_type
    title
    channel {
      channel_id
      channel_name
    }
    date_published
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  videos_aggregate(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}], video_type: {_eq: $videoType}}) {
    aggregate {
      count
    }
  }
}

query GetChannelDetail($channelId: uuid!) {
  channels(where: {channel_id: {_eq: $channelId}}) {
    channel_id
    channel_name
    channel_type
    location_lat
    location_long
    region_code
    videosInChannel:videos {
      video_id
      title
      video_type
      speaker {
        speaker_id
        speaker_name
      }
      language {
        language_code
        source_country_flag
      }
      gcp_thumbnail_bucket_name
      gcp_thumbnail_file_name
      description
      date_published
    }
    website_url
  }
}
