query GetAllChannels {
  channels {
    channel_id
    channel_name
    channel_type
    location_lat
    location_long
    region_code
    address_text
  }
}

query GetHomeScreenData {
  documentaries: videos(where: {video_type: {_eq: documentary}}, order_by: {date_published: desc}, limit: 15) {
    video_id
    channel {
      channel_id
      channel_name
    }
    date_published
    title
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  
  sermons: videos(where: {video_type: {_eq: sermon}}, order_by: {date_published: desc}, limit: 15) {
    video_id
    channel {
      channel_id
      channel_name
    }
    date_published
    title
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  
  shorts: videos(where: {video_type: {_eq: short}}, order_by: {date_published: desc}, limit: 15) {
    video_id
    channel {
      channel_id
      channel_name
    }
    date_published
    title
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  
  musicVideos: videos(where: {video_type: {_eq: music}}, order_by: {date_published: desc}, limit: 15) {
    video_id
    channel {
      channel_id
      channel_name
    }
    date_published
    title
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
}

query GetVideoDetailData($videoId: uuid!, $channelId: uuid!, $userUuid: String!) {
  videoDetail: videos(where: {video_id: {_eq: $videoId}}) {
    video_id
    title
    video_type
    date_published
    description
    speaker {
      speaker_id
      speaker_name
    }
    channel {
      channel_id
      channel_name
      channel_type
    }
    language {
      language_code
      source_country_flag
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  moreVideosInChannel: videos(where: {channel_id: {_eq: $channelId}, video_id: {_neq: $videoId}}) {
    video_id
    title
    channel {
      channel_id
      channel_name
    }
    date_published
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  videos_likes_dislikes(where: {user_uuid: {_eq: $userUuid}, video_id: {_eq: $videoId}}) {
    liked
  }
}

query GetVideosForSearchText($searchText: String!, $limit: Int!, $offset: Int!) {
  videos(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}]}, limit: $limit, offset: $offset) {
    video_id
    video_type
    title
    channel {
      channel_id
      channel_name
    }
    date_published
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  videos_aggregate(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}]}) {
    aggregate {
      count
    }
  }
}

query GetVideosForSearchTextAndVideoType($searchText: String!, $videoType: video_types_enum!, $limit: Int!, $offset: Int!) {
  videos(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}], video_type: {_eq: $videoType}}, limit: $limit, offset: $offset) {
    video_id
    video_type
    title
    channel {
      channel_id
      channel_name
    }
    date_published
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  videos_aggregate(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}], video_type: {_eq: $videoType}}) {
    aggregate {
      count
    }
  }
}

query GetVideosForSearchTextAndLanguageCode($searchText: String!, $languageCode: String!, $limit: Int!, $offset: Int!) {
  videos(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}], language_code: {_eq: $languageCode}}, limit: $limit, offset: $offset) {
    video_id
    video_type
    title
    channel {
      channel_id
      channel_name
    }
    date_published
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  videos_aggregate(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}], language_code: {_eq: $languageCode}}) {
    aggregate {
      count
    }
  }
}

query GetVideosForSearchTextVideoTypeAndLanguageCode($searchText: String!, $videoType: video_types_enum!, $languageCode: String!, $limit: Int!, $offset: Int!) {
  videos(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}], video_type: {_eq: $videoType}, language_code: {_eq: $languageCode}}, limit: $limit, offset: $offset) {
    video_id
    video_type
    title
    channel {
      channel_id
      channel_name
    }
    date_published
    speaker {
      speaker_name
    }
    gcp_thumbnail_bucket_name
    gcp_thumbnail_file_name
  }
  videos_aggregate(where: {_or: [{channel: {channel_name: {_ilike: $searchText}}}, {title: {_ilike: $searchText}}], video_type: {_eq: $videoType}, language_code: {_eq: $languageCode}}) {
    aggregate {
      count
    }
  }
}

query GetChannelDetail($channelId: uuid!) {
  channels(where: {channel_id: {_eq: $channelId}}) {
    channel_id
    channel_name
    channel_type
    location_lat
    location_long
    region_code
    videosInChannel:videos {
      video_id
      title
      video_type
      speaker {
        speaker_id
        speaker_name
      }
      language {
        language_code
        source_country_flag
      }
      gcp_thumbnail_bucket_name
      gcp_thumbnail_file_name
      description
      date_published
    }
    website_url
  }
}

query GetAllLanguages {
  languages {
    language_code
    source_country_flag
  }
}
